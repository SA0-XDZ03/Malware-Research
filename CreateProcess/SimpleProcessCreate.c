#include <stdio.h>
#include <windows.h>

int main(void) {
    if(!MessageBoxW(
        NULL,
        L"Welcome To Process Creation Module!",
        L"Creating Process with CreateProcessW",
        MB_OK | MB_ICONEXCLAMATION
    )) {
        printf("(X) Message Box Creation Failed. Error: %ld \n", GetLastError());
        return EXIT_FAILURE;
    }
    else {
        printf("(+) Message Box Created Successfully! \n");
        STARTUPINFOW si = { 0 };
        PROCESS_INFORMATION pi = { 0 };
        if (!CreateProcessW(
            L"C:\\Windows\\System32\\notepad.exe",
            NULL,
            NULL,
            NULL,
            FALSE,
            BELOW_NORMAL_PRIORITY_CLASS,
            NULL,
            NULL,
            &si,
            &pi
        )) {
            printf("(X) Error Creating a Process. Error: %ld \n", GetLastError());
            return EXIT_FAILURE;
        }
        printf("Process Successfully Created at %ld \n", pi.dwProcessId);
        printf("Additional Thread Information at %ld \n", pi.dwThreadId);
        return EXIT_SUCCESS;
    }

    return EXIT_SUCCESS;
}